<!DOCTYPE html>
<html>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link
    href="https://fonts.googleapis.com/css2?family=Arapey&display=swap"
    rel="stylesheet"
  />

  <head>
    <meta charset="UTF-8" />
    <title>Sistema de Avaliação de Saúde</title>
    <link rel="stylesheet" type="text/css" href="styles.css" />
  </head>

  <body>
    <div id="main-container">
      <h1 id="title">STCOVID - Sistema de Avaliação de Saúde</h1>
      <h3 id="subtitle">Forneça seus dados para continuar:</h3>
      <form id="form-initial">
        <label for="name" style="padding-bottom: 5px">Nome:</label>
        <input type="text" id="name" required />
        <label for="cpf" style="padding-bottom: 5px">CPF:</label>
        <input type="text" id="cpf" required minlength="14" maxlength="14" />
        <div class="checkbox">
          <label id="label-consent" for="consent"
            >Autorizo o sistema a usar meus dados.</label
          >
          <input type="checkbox" id="consent" required />
        </div>

        <button type="submit" id="button-home">Iniciar avaliação</button>
      </form>

      <div id="remove-form-container">
        <h3>Remover Diagnóstico</h3>
        <form id="remove-form">
          <label for="remove-name">Nome:</label>
          <input type="text" id="remove-name" required />
          <label for="remove-cpf">CPF:</label>
          <input
            type="text"
            id="remove-cpf"
            minlength="11"
            maxlength="11"
            required
          />
          <button type="submit" id="remove-button">Excluir diagnóstico</button>
        </form>
      </div>

      <span></span>
      <span></span>

      <button id="btnVerDiagnostico" class="btnVerDiagnostico">
        Ver diagnósticos realizados
      </button>
      <br />
      <div class="diarealizados" style="display: none; margin-bottom: 8%">
        <h3>Diagnósticos Realizados:</h3>
        <h4>ID - Protocolo de Saúde</h4>
        <div id="resultText"></div>
        <div id="colorsDiv"></div>
      </div>

      <div id="resultText"></div>

      <form id="form-questions" style="display: none">
        <div class="usuario">
          <h3>Usuário:</h3>
          <h3 id="user-name"></h3>
        </div>
        <h2 id="forms-subtitle">Responda de acordo com seus sintomas:</h2>
        <ul id="question-list"></ul>
        <button type="button" id="result-button">
          Obter resultado da avaliação
        </button>
      </form>

      <div id="result-screen" style="display: none">
        <h2 id="result-text"></h2>
        <button type="button" id="back-button">Voltar à página inicial</button>
      </div>
    </div>

    <script src="script.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.mask/1.14.16/jquery.mask.min.js"></script>
    <script>
      function formatarCPF(cpf) {
        cpf = cpf.replace(/\D/g, "");
        cpf = cpf.replace(/(\d{3})(\d)/, "$1.$2");
        cpf = cpf.replace(/(\d{3})(\d)/, "$1.$2");
        cpf = cpf.replace(/(\d{3})(\d{1,2})$/, "$1-$2");
        return cpf;
      }

      document.getElementById("cpf").addEventListener("input", function (e) {
        var target = e.target;
        var cpf = target.value;
        target.value = formatarCPF(cpf);
      });

      var btnVerDiagnostico = document.getElementById("btnVerDiagnostico");
      var divDiagnostico = document.querySelector(".diarealizados");
      var isVisible = false;

      btnVerDiagnostico.addEventListener("click", function () {
        if (isVisible) {
          divDiagnostico.style.display = "none";
          isVisible = false;
        } else {
          divDiagnostico.style.display = "block";
          isVisible = true;
        }
      });
    </script>
  </body>
</html>
